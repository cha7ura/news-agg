# Per-source configuration for the news aggregation pipeline.
# Each source defines: URL patterns, archive pagination, content selectors, and scraping rules.

ada-derana-en:
  name: Ada Derana
  url: https://www.adaderana.lk
  rss_url: https://www.adaderana.lk/rss.php
  language: en

  # Sections with their listing/archive pages
  sections:
    hot-news:
      listing_url: https://www.adaderana.lk/hot-news/
      archive_pattern: "https://www.adaderana.lk/hot-news/?pageno={page}"
      max_pages: 40
    sports:
      listing_url: https://www.adaderana.lk/sports-news/
      archive_pattern: "https://www.adaderana.lk/sports-news/?pageno={page}"
      max_pages: 40
    entertainment:
      listing_url: https://www.adaderana.lk/entertainment-news/
      archive_pattern: "https://www.adaderana.lk/entertainment-news/?pageno={page}"
      max_pages: 40
    technology:
      listing_url: https://www.adaderana.lk/technology-news/
      archive_pattern: "https://www.adaderana.lk/technology-news/?pageno={page}"
      max_pages: 40

  # Article URL patterns (regex) — used to identify valid article links
  article_url_patterns:
    - '/news/\d+/'         # /news/118427/article-slug
    - '/sports/\d+/'       # /sports/11891/article-slug
    - '/entertainment/\d+/' # /entertainment/118422/article-slug
    - '/technology/\d+/'   # /technology/118295/article-slug
    - 'news\.php\?nid=\d+' # Legacy: news.php?nid=118427

  # URL patterns to skip (not articles)
  skip_url_patterns:
    - '\?mode=(beauti|head)'
    - '/(hot-news|news_archive|sports-news|entertainment-news|technology-news)/?$'
    - '/morehotnews\.php'
    - '/moretechnews\.php'
    - '/more-entertainment-news\.php'
    - '/search_results\.php'

  # CSS selectors for content extraction (tried in order)
  selectors:
    title:
      - h1.news-heading
      - h1.article-title
      - article h1
      - h1
    content:
      - .news-content
      - "#article-body"
      - .article-body
      - .story-text
      - article .entry-content
      - article
    date:
      - time[datetime]
      - .news-datestamp
      - .publish-date
      - .article-date
    author:
      - .author-name
      - .byline
      - '[rel="author"]'
    image:
      - .article-image img
      - article img
      - .featured-image img

  # NID sweep — iterate through sequential article IDs for full coverage
  # news.php?nid=N redirects to /news/N/slug (canonical URL is captured after redirect)
  nid_sweep:
    - url_pattern: "https://www.adaderana.lk/news.php?nid={nid}"
      start: 10000
      end: 119000
      # Stop after this many consecutive 404s (end-of-range detection)
      # Set high (500) to handle legitimate gaps in article ID ranges
      max_consecutive_404: 500

  # Meta tags for date extraction
  date_meta_tags:
    - article:published_time
    - og:article:published_time
    - datePublished
    - publishedTime

  backfill:
    methods:
      - type: archive
        pages: 40
      - type: nid_sweep


ada-derana-si:
  name: Ada Derana Sinhala
  url: https://sinhala.adaderana.lk
  rss_url: null  # No RSS — uses listing page scrape
  language: si

  sections:
    hot-news:
      listing_url: https://sinhala.adaderana.lk/
      archive_pattern: "https://sinhala.adaderana.lk/sinhala-hot-news.php?pageno={page}"
      max_pages: 40
    sports:
      listing_url: https://sinhala.adaderana.lk/other-news.php?sid=39
      archive_pattern: null  # No paginated archive for sports
      max_pages: 1

  # Article URL patterns
  article_url_patterns:
    - '/news/\d+'           # /news/221312
    - '/sports/\d+'         # /sports/221269/slug
    - 'news\.php\?nid=\d+'  # Legacy: news.php?nid=221312

  skip_url_patterns:
    - '\?mode=head'
    - '/sinhala-hot-news\.php'
    - '/news_archive\.php'
    - '/other-news\.php'
    - '/wada-pitiya\.php'
    - '/cartoon/'
    - '/new-parliament\.php'
    - '/contactus\.php'
    - '/rsshotnews\.php'
    - '/360\.php'
    - '/includes/'

  selectors:
    title:
      - h1.news-heading
      - .news-title h1
      - article h1
      - h1
    content:
      - .news-content
      - "#DivNewsContent"
      - .story-body
      - .inner-fontstyle
      - article
    date:
      - time[datetime]
      - .news-datestamp
      - .publish-date
    author:
      - .author-name
      - .byline
    image:
      - .news-photo img
      - .article-image img
      - article img

  # NID sweep — iterate through sequential article IDs
  # /news/N resolves directly (no slug needed for Sinhala)
  nid_sweep:
    - url_pattern: "https://sinhala.adaderana.lk/news/{nid}"
      start: 10000
      end: 222000
      max_consecutive_404: 500

  date_meta_tags:
    - article:published_time
    - og:article:published_time
    - datePublished

  backfill:
    methods:
      - type: archive
        pages: 40
      - type: nid_sweep


daily-mirror-en:
  name: Daily Mirror
  url: https://www.dailymirror.lk
  rss_url: null  # Cloudflare-protected — no accessible RSS feed
  language: en

  # Cloudflare-protected — lower concurrency and slower rate limit
  scheduling:
    rate_limit_ms: 1000
    max_concurrency: 2
    priority: 3

  # Daily Mirror uses offset-based pagination: /section/category_id/{offset}
  # offset = 0, 30, 60, 90... (30 articles per page)
  sections:
    breaking-news:
      listing_url: https://www.dailymirror.lk/breaking-news/108
      archive_pattern: "https://www.dailymirror.lk/breaking-news/108/{page}"
      page_start: 0
      page_step: 30
      max_pages: 40
    top-stories:
      listing_url: https://www.dailymirror.lk/top-storys/155
      archive_pattern: "https://www.dailymirror.lk/top-storys/155/{page}"
      page_start: 0
      page_step: 30
      max_pages: 40
    opinion:
      listing_url: https://www.dailymirror.lk/opinion/231
      archive_pattern: "https://www.dailymirror.lk/opinion/231/{page}"
      page_start: 0
      page_step: 30
      max_pages: 20
    features:
      listing_url: https://www.dailymirror.lk/features/131
      archive_pattern: "https://www.dailymirror.lk/features/131/{page}"
      page_start: 0
      page_step: 30
      max_pages: 20
    sports:
      listing_url: https://www.dailymirror.lk/sports
      archive_pattern: "https://www.dailymirror.lk/sports/322/{page}"
      page_start: 0
      page_step: 30
      max_pages: 20
    business:
      listing_url: https://www.dailymirror.lk/business
      archive_pattern: "https://www.dailymirror.lk/business-news/273/{page}"
      page_start: 0
      page_step: 30
      max_pages: 20
    world-news:
      listing_url: https://www.dailymirror.lk/world-news/213
      archive_pattern: "https://www.dailymirror.lk/world-news/213/{page}"
      page_start: 0
      page_step: 30
      max_pages: 20
    international:
      listing_url: https://www.dailymirror.lk/international/107
      archive_pattern: "https://www.dailymirror.lk/international/107/{page}"
      page_start: 0
      page_step: 30
      max_pages: 20

  # Article URL patterns: /section-name/Title-Slug/category_id-article_id
  article_url_patterns:
    - '/[a-z-]+/.+/\d+-\d{5,}'          # /breaking-news/Title/108-332548

  skip_url_patterns:
    - '/print/'
    - '/(cartoon|poll|obituaries|podcast|archives|feedback|apps|search|login|connect)/?$'
    - '/(Weekend_Online|dailyMirror-online|Daily-Mirror-Events)/'
    - '/(election|special-editions|infographics|fact-check|press-release)/?'
    - '\.(jpg|png|pdf)$'

  # CSS selectors for content extraction
  selectors:
    title:
      - h1.inner_header
      - article h1
      - h1
    content:
      - .a-content
      - .news-content
      - article .entry-content
      - article
    date:
      - time[datetime]
      - .publish-date
    author:
      - a.inner_other
      - .author-name
      - .byline
    image:
      - .fotorama img
      - article img

  # No standard date meta tags — dates are inline text only.
  # The body-text date waterfall (level 4) handles "14 February 2026 09:13 am" format.
  date_meta_tags:
    - article:published_time
    - og:article:published_time
    - datePublished

  backfill:
    methods:
      - type: archive
        pages: 100


newsfirst-en:
  name: NewsFirst
  url: https://english.newsfirst.lk
  rss_url: null  # Angular SPA — no RSS feed
  language: en

  # Listing pages only — no pagination (Angular SPA renders ~10-13 articles per section)
  sections:
    latest:
      listing_url: https://english.newsfirst.lk/latest
      archive_pattern: null
      max_pages: 1
    featured:
      listing_url: https://english.newsfirst.lk/featured
      archive_pattern: null
      max_pages: 1
    local:
      listing_url: https://english.newsfirst.lk/local
      archive_pattern: null
      max_pages: 1
    sports:
      listing_url: https://english.newsfirst.lk/sports
      archive_pattern: null
      max_pages: 1
    world:
      listing_url: https://english.newsfirst.lk/world
      archive_pattern: null
      max_pages: 1
    business:
      listing_url: https://english.newsfirst.lk/business
      archive_pattern: null
      max_pages: 1

  # Article URLs use date-based paths: /YYYY/MM/DD/article-slug
  article_url_patterns:
    - '/\d{4}/\d{2}/\d{2}/[a-z]'

  skip_url_patterns:
    - '/(search|home|latest|featured|local|sports|world|business|corporate-brief)/?$'

  # CSS selectors for Angular SSR-rendered content
  selectors:
    title:
      - h1.top_stories_header_news
      - article h1
      - h1
    content:
      - "#testId.new_details"
      - .new_details
      - article
    date:
      - .author_main span
    author:
      - .author_main
    image:
      - "#post_img"
      - article img

  # Date sweep — iterate through calendar dates to discover articles from daily archive pages
  # Each /YYYY/MM/DD page lists ~10 articles published that day (SSR-rendered, no JS pagination)
  date_sweep:
    url_pattern: "https://english.newsfirst.lk/{date}"
    date_format: "%Y/%m/%d"
    start_date: "2020-01-01"

  date_meta_tags:
    - article:published_time
    - og:article:published_time
    - datePublished

  backfill:
    methods:
      - type: date_sweep


island-en:
  name: The Island
  url: https://island.lk
  rss_url: https://island.lk/feed/
  language: en

  # WordPress site — homepage and /page/N for archive (JS-rendered, needs Playwright)
  sections:
    latest:
      listing_url: https://island.lk/
      archive_pattern: "https://island.lk/page/{page}/"
      max_pages: 40

  # Article URLs are slug-based: /article-title-slug/
  article_url_patterns:
    - '/[a-z][a-z0-9-]+/?$'

  skip_url_patterns:
    - '/(category|tag|author|page|wp-)/'
    - '/(about|contact|privacy|terms|cookie)/'
    - '\.(jpg|png|pdf)$'
    - '/feed/?$'

  # CSS selectors (WordPress MVP theme)
  selectors:
    title:
      - h1.mvp-post-title
      - h1.entry-title
      - h1
    content:
      - "#mvp-content-body"
      - "#mvp-post-content"
      - .entry-content
      - article
    date:
      - time.post-date[datetime]
      - time[itemprop="datePublished"]
      - time[datetime]
    author:
      - .mvp-author-info-name a
      - .mvp-author-info-name
    image:
      - .mvp-post-feat-img-wide2 img
      - article img

  # NID sweep — WordPress ?p=ID redirects to canonical slug URL
  nid_sweep:
    - url_pattern: "https://island.lk/?p={nid}"
      start: 50000
      end: 200000
      max_consecutive_404: 500

  date_meta_tags:
    - article:published_time
    - og:article:published_time
    - datePublished

  backfill:
    methods:
      - type: archive
        pages: 40
      - type: nid_sweep


economynext-en:
  name: EconomyNext
  url: https://economynext.com
  rss_url: https://economynext.com/feed/
  language: en

  # Listing pages — /more-news has WordPress pagination /page/N/
  sections:
    all:
      listing_url: https://economynext.com/more-news
      archive_pattern: "https://economynext.com/more-news/page/{page}/"
      max_pages: 100

  # Article URLs: /slug-with-article-id/ (ID at end of slug)
  article_url_patterns:
    - '^https?://economynext\.com/[a-z][a-z0-9-]+-\d+/$'

  skip_url_patterns:
    - '/(category|tag|author|page|wp-)/'
    - '/(about|contact|privacy|terms|more-news|brand-voice|video)/?$'
    - '/(economy|finance|markets|politics|logistics|energy|tech|opinion|sci-tech)/?$'
    - '\.(jpg|png|pdf)$'
    - '/feed/?$'

  # CSS selectors (custom WordPress theme)
  selectors:
    title:
      - h1.story-page-header
      - article h1
      - h1
    content:
      - .story-page-text-content
      - .story-page-text-main
      - article
    date:
      - .story-page-pulish-datetime
      - time[datetime]
    author:
      - .single-author a
      - .single-author
    image:
      - .story-page-image img
      - article img

  # NID sweep — WordPress ?p=ID redirects to canonical URL
  # ID space is sparse (pages, revisions, images also use IDs)
  nid_sweep:
    - url_pattern: "https://economynext.com/?p={nid}"
      start: 1000
      end: 265000
      max_consecutive_404: 500

  date_meta_tags:
    - article:published_time
    - og:article:published_time
    - datePublished

  backfill:
    methods:
      - type: archive
        pages: 40
      - type: nid_sweep


colombo-gazette-en:
  name: Colombo Gazette
  url: https://colombogazette.com
  rss_url: null  # Next.js SPA — no RSS feed
  language: en

  # Category listing pages (SSR-rendered)
  sections:
    news:
      listing_url: https://colombogazette.com/category/news
      archive_pattern: null
      max_pages: 1
    business:
      listing_url: https://colombogazette.com/category/business
      archive_pattern: null
      max_pages: 1
    world-news:
      listing_url: https://colombogazette.com/category/world-news
      archive_pattern: null
      max_pages: 1
    sports:
      listing_url: https://colombogazette.com/category/sports
      archive_pattern: null
      max_pages: 1
    entertainment:
      listing_url: https://colombogazette.com/category/entertainment
      archive_pattern: null
      max_pages: 1
    breaking-news:
      listing_url: https://colombogazette.com/category/breaking-news
      archive_pattern: null
      max_pages: 1

  # Article URLs: /YYYY/MM/DD/slug
  article_url_patterns:
    - '/\d{4}/\d{2}/\d{2}/[a-z]'

  skip_url_patterns:
    - '/(category|about|contact|privacy|terms|cookie-policy|copyright-policy)/?$'

  # CSS selectors (Next.js with Tailwind — .prose wraps article text)
  selectors:
    title:
      - h1
    content:
      - .prose
      - article
    date:
      - time[datetime]
    author:
      - .author-name
    image:
      - article img

  # Date sweep — iterate through calendar dates (same pattern as NewsFirst)
  date_sweep:
    url_pattern: "https://colombogazette.com/{date}"
    date_format: "%Y/%m/%d"
    start_date: "2020-01-01"

  date_meta_tags:
    - article:published_time
    - og:article:published_time
    - datePublished

  backfill:
    methods:
      - type: date_sweep


news19-si:
  name: News19
  url: https://www.news19.lk
  rss_url: https://www.news19.lk/feed/
  language: si

  # WordPress with tagDiv Newspaper theme — category pages for listing
  sections:
    news:
      listing_url: https://www.news19.lk/category/news/
      archive_pattern: "https://www.news19.lk/category/news/page/{page}/"
      max_pages: 40
    features:
      listing_url: https://www.news19.lk/category/features/
      archive_pattern: "https://www.news19.lk/category/features/page/{page}/"
      max_pages: 40
    foreign:
      listing_url: https://www.news19.lk/category/foreign/
      archive_pattern: "https://www.news19.lk/category/foreign/page/{page}/"
      max_pages: 40
    sports:
      listing_url: https://www.news19.lk/category/sports/
      archive_pattern: "https://www.news19.lk/category/sports/page/{page}/"
      max_pages: 40

  # Article URLs: slug-based (e.g., /mahawa-chairman-accuses-a-famous-channel/)
  article_url_patterns:
    - '/[a-z][a-z0-9-]+/?$'

  skip_url_patterns:
    - '/(category|tag|author|page|wp-)/'
    - '/(about-us|contact|advertising|privacy|terms|cookie)/'
    - '\.(jpg|png|pdf)$'
    - '/feed/?$'

  # CSS selectors (tagDiv Newspaper theme)
  selectors:
    title:
      - h1.tdb-title-text
      - h1.entry-title
      - h1
    content:
      - .td-post-content
      - .tdb_single_content .tdb-block-inner
      - article
    date:
      - time.entry-date[datetime]
      - time[datetime]
    author:
      - a.tdb-author-name
      - .tdb-author-name
    image:
      - .td-post-featured-image img
      - img.entry-thumb
      - article img

  # NID sweep — WordPress ?p=ID redirects to canonical slug URL
  nid_sweep:
    - url_pattern: "https://www.news19.lk/?p={nid}"
      start: 100000
      end: 200000
      max_consecutive_404: 500

  date_meta_tags:
    - article:published_time
    - og:article:published_time
    - datePublished

  backfill:
    methods:
      - type: archive
        pages: 40
      - type: nid_sweep


sunday-observer-en:
  name: Sunday Observer
  url: https://www.sundayobserver.lk
  rss_url: https://www.sundayobserver.lk/feed/
  language: en

  # WordPress — homepage and /page/N/ for archive
  sections:
    latest:
      listing_url: https://www.sundayobserver.lk/
      archive_pattern: "https://www.sundayobserver.lk/page/{page}/"
      max_pages: 40

  # Article URLs: /YYYY/MM/DD/section/id/slug/
  article_url_patterns:
    - '/\d{4}/\d{2}/\d{2}/[a-z-]+/\d+/'

  skip_url_patterns:
    - '/(category|tag|author|page|wp-)/'
    - '/(about|contact|privacy|epaper|archives)/?$'
    - '\.(jpg|png|pdf)$'
    - '/feed/?$'

  # CSS selectors (WordPress Flavor theme)
  selectors:
    title:
      - h1.post-title
      - h1.entry-title
      - h1
    content:
      - .inner-post-entry.entry-content
      - .entry-content
      - article
    date:
      - time.entry-date[datetime]
      - time[datetime]
    author:
      - .author-italic a.author-url
      - .author-url
    image:
      - .single-post-thumb img
      - article img

  # NID sweep — WordPress ?p=ID redirects to canonical URL
  nid_sweep:
    - url_pattern: "https://www.sundayobserver.lk/?p={nid}"
      start: 1000
      end: 73000
      max_consecutive_404: 500

  date_meta_tags:
    - article:published_time
    - og:article:published_time
    - datePublished

  backfill:
    methods:
      - type: archive
        pages: 40
      - type: nid_sweep


lanka-news-web-en:
  name: Lanka News Web
  url: https://lankanewsweb.net
  rss_url: https://lankanewsweb.net/feed/
  language: en

  # WordPress with tagDiv Newspaper theme (same as News19)
  sections:
    news:
      listing_url: https://lankanewsweb.net/archives/category/news/
      archive_pattern: "https://lankanewsweb.net/archives/category/news/page/{page}/"
      max_pages: 40
    political:
      listing_url: https://lankanewsweb.net/archives/category/news/political-news/
      archive_pattern: "https://lankanewsweb.net/archives/category/news/political-news/page/{page}/"
      max_pages: 40
    business:
      listing_url: https://lankanewsweb.net/archives/category/business/
      archive_pattern: "https://lankanewsweb.net/archives/category/business/page/{page}/"
      max_pages: 40
    foreign:
      listing_url: https://lankanewsweb.net/archives/category/foreign/
      archive_pattern: "https://lankanewsweb.net/archives/category/foreign/page/{page}/"
      max_pages: 40
    sports:
      listing_url: https://lankanewsweb.net/archives/category/sport/
      archive_pattern: "https://lankanewsweb.net/archives/category/sport/page/{page}/"
      max_pages: 40

  # Article URLs: /archives/id/slug/
  article_url_patterns:
    - '/archives/\d+/'

  skip_url_patterns:
    - '/(category|tag|author|page|wp-)/'
    - '/(tds-checkout|tds-my-account|tds-login-register)/'
    - '\.(jpg|png|pdf)$'
    - '/feed/?$'

  # CSS selectors (tagDiv Newspaper theme — similar to News19)
  selectors:
    title:
      - h1.tdb-title-text
      - h1.entry-title
      - h1
    content:
      - .td-post-content
      - .tdb_single_content .tdb-block-inner
      - article
    date:
      - time.entry-date[datetime]
      - time[datetime]
    author:
      - a.tdb-author-name
      - .tdb-author-name
    image:
      - .td-post-featured-image img
      - article img

  # NID sweep — WordPress ?p=ID redirects to canonical URL
  nid_sweep:
    - url_pattern: "https://lankanewsweb.net/?p={nid}"
      start: 1000
      end: 175000
      max_consecutive_404: 500

  date_meta_tags:
    - article:published_time
    - og:article:published_time
    - datePublished

  backfill:
    methods:
      - type: archive
        pages: 40
      - type: nid_sweep


lankatruth-si:
  name: Lanka Truth
  url: https://lankatruth.com/si
  rss_url: null  # Feed returns 404
  language: si

  # WordPress with Elementor + Genesis theme
  sections:
    main:
      listing_url: https://lankatruth.com/si/
      archive_pattern: "https://lankatruth.com/si/page/{page}/"
      max_pages: 40
    politics:
      listing_url: https://lankatruth.com/si/?cat=10
      archive_pattern: null
      max_pages: 1

  # Article URLs: /?p=195491
  article_url_patterns:
    - '\?p=\d+'

  skip_url_patterns:
    - '/(category|tag|author|page|wp-)/'
    - '\?cat=\d+'
    - '\.(jpg|png|pdf)$'
    - '/feed/?$'

  # CSS selectors (Elementor + Genesis theme)
  selectors:
    title:
      - h1.elementor-heading-title
      - h1.entry-title
      - h1
    content:
      - .elementor-widget-theme-post-content
      - .entry-content
      - article
    date:
      - time.entry-date[datetime]
      - time[datetime]
    author:
      - .author-name
      - .byline
    image:
      - .post-thumbnail img
      - article img

  # NID sweep — WordPress ?p=ID redirects to canonical URL
  nid_sweep:
    - url_pattern: "https://lankatruth.com/si/?p={nid}"
      start: 1000
      end: 196000
      max_consecutive_404: 500

  date_meta_tags:
    - article:published_time
    - og:article:published_time
    - datePublished

  backfill:
    methods:
      - type: nid_sweep


# ─── Tier 1: High-Value Sources ──────────────────────────────────────────────

hiru-news-en:
  name: Hiru News
  url: https://hirunews.lk
  rss_url: null  # Custom CMS, no RSS
  language: en

  sections:
    latest:
      listing_url: https://hirunews.lk/en/
      archive_pattern: null
      max_pages: 1

  article_url_patterns:
    - '/(english|en)/(\w+/)?\d+/'    # /english/446676/slug or /english/sports/446538/slug

  skip_url_patterns:
    - '/(english|en)/?$'
    - '/news_listing\.php'
    - '/contact'
    - '\.(jpg|png|pdf)$'

  selectors:
    title:
      - h1.head-title
      - h1
    content:
      - ".description-content#this-article"
      - .description-content
      - .description
    date:
      - ".update-wrp-lg span:nth-child(2)"
      - time[datetime]
    author:
      - .author-name
    image:
      - .featured-image img
      - article img

  nid_sweep:
    - url_pattern: "https://www.hirunews.lk/english/{nid}"
      start: 1000
      end: 60000
      max_consecutive_404: 500

  date_meta_tags:
    - article:published_time
    - datePublished

  backfill:
    methods:
      - type: nid_sweep


ft-en:
  name: Daily FT
  url: https://www.ft.lk
  rss_url: null
  language: en

  sections:
    front-page:
      listing_url: https://www.ft.lk/front-page/44
      archive_pattern: null
      max_pages: 1
    business:
      listing_url: https://www.ft.lk/business/34
      archive_pattern: null
      max_pages: 1
    news:
      listing_url: https://www.ft.lk/news/56
      archive_pattern: null
      max_pages: 1

  article_url_patterns:
    - '/[a-z-]+/.+/\d+-\d+'  # /front-page/Title/44-773750

  skip_url_patterns:
    - '/(columns|cartoon|e-edition|advertise|contact|aboutus|privacy)/?$'
    - '\.(jpg|png|pdf)$'

  selectors:
    title:
      - h1.innerheader
      - h1
    content:
      - .inner-content
      - article
    date:
      - .gtime
      - time[datetime]
    author:
      - .author-name
    image:
      - .inner-content img
      - article img

  nid_sweep:
    - url_pattern: "https://www.ft.lk/?p={nid}"
      start: 500000
      end: 775000
      max_consecutive_404: 500

  date_meta_tags:
    - article:published_time
    - datePublished

  backfill:
    methods:
      - type: nid_sweep


lankadeepa-si:
  name: Lankadeepa
  url: https://www.lankadeepa.lk
  rss_url: https://www.lankadeepa.lk/rss
  language: si

  # Lake House custom CMS — listing pages by section
  sections:
    latest-news:
      listing_url: https://www.lankadeepa.lk/latest-news/1
      archive_pattern: null
      max_pages: 1
    news:
      listing_url: https://www.lankadeepa.lk/news/101
      archive_pattern: null
      max_pages: 1
    world-news:
      listing_url: https://www.lankadeepa.lk/world_news/14
      archive_pattern: null
      max_pages: 1
    sports:
      listing_url: https://www.lankadeepa.lk/sports/3
      archive_pattern: null
      max_pages: 1

  # URL pattern: /section/slug/cat_id-article_id
  article_url_patterns:
    - '/[a-z_-]+/.+/\d+-\d+'  # /latest-news/slug/1-688189

  skip_url_patterns:
    - '/(rss|feedback|cartoon|saradam|rasa-windana)/'
    - '/(latest-news|latest_news|news|world_news|sports)/\d+/?$'
    - '\.(jpg|png|pdf)$'

  selectors:
    title:
      - h1.article-title
      - h1
    content:
      - .article-body
      - article
    date:
      - .article-meta
    author:
      - .author-name
    image:
      - .article-body img
      - article img

  nid_sweep:
    - url_pattern: "https://www.lankadeepa.lk/latest_news/x/1-{nid}"
      start: 500000
      end: 690000
      max_consecutive_404: 500

  date_meta_tags:
    - article:published_time
    - datePublished

  backfill:
    methods:
      - type: nid_sweep


divaina-si:
  name: Divaina
  url: https://www.divaina.lk
  rss_url: null
  language: si

  # Custom CMS — section-based listing pages
  sections:
    main-news:
      listing_url: https://www.divaina.lk/main-news
      archive_pattern: null
      max_pages: 1
    foreign-news:
      listing_url: https://www.divaina.lk/foreign-news
      archive_pattern: null
      max_pages: 1
    business-news:
      listing_url: https://www.divaina.lk/business-news
      archive_pattern: null
      max_pages: 1
    provincial-news:
      listing_url: https://www.divaina.lk/provincial-news
      archive_pattern: null
      max_pages: 1

  article_url_patterns:
    - '/[a-z-]+/\d+'  # /main-news/43015

  skip_url_patterns:
    - '/(cartoons|sitemap|contact|about)/'
    - '/[a-z-]+/?$'
    - '\.(jpg|png|pdf)$'

  selectors:
    title:
      - h1
    content:
      - .article-body
      - .news-content
      - article
    date:
      - .article-meta
      - time[datetime]
    author:
      - .author-name
    image:
      - article img

  nid_sweep:
    - url_pattern: "https://www.divaina.lk/main-news/{nid}"
      start: 1000
      end: 44000
      max_consecutive_404: 500

  date_meta_tags:
    - article:published_time
    - datePublished

  backfill:
    methods:
      - type: nid_sweep


# ─── Tier 2: Good Value Sources ──────────────────────────────────────────────

colombo-telegraph-en:
  name: Colombo Telegraph
  url: https://www.colombotelegraph.com
  rss_url: null
  language: en

  # WordPress Newsroom theme
  sections:
    latest:
      listing_url: https://www.colombotelegraph.com/
      archive_pattern: null
      max_pages: 1

  article_url_patterns:
    - '/index\.php/[a-z]'  # /index.php/article-slug

  skip_url_patterns:
    - '/index\.php/(author|category|tag|page)/'
    - '/(wp-admin|wp-login|feed)/'
    - '\.(jpg|png|pdf)$'

  selectors:
    title:
      - h1.entry-title.eltd-post-title
      - h1.entry-title
      - h1
    content:
      - .pf-content
      - .eltd-post-text-inner
      - .eltd-post-content
      - article
    date:
      - .eltd-post-info-date.entry-date
      - time[datetime]
    author:
      - a.eltd-post-info-author-link
      - .author-name
    image:
      - .eltd-post-image img
      - article img

  nid_sweep:
    - url_pattern: "https://www.colombotelegraph.com/?p={nid}"
      start: 50000
      end: 185000
      max_consecutive_404: 500

  date_meta_tags:
    - article:published_time
    - og:article:published_time
    - datePublished

  backfill:
    methods:
      - type: nid_sweep


daily-news-en:
  name: Daily News
  url: https://dailynews.lk
  rss_url: https://dailynews.lk/feed/
  language: en

  # WordPress Soledad/Penci theme — date-based URLs
  sections:
    latest:
      listing_url: https://dailynews.lk/
      archive_pattern: "https://dailynews.lk/page/{page}/"
      max_pages: 40

  article_url_patterns:
    - '/\d{4}/\d{2}/\d{2}/[a-z-]+/\d+/'  # /2026/02/14/section/951200/slug

  skip_url_patterns:
    - '/(category|tag|author|page|wp-)/'
    - '/(about|contact|privacy|archives|e-edition|advertise)/?$'
    - '\.(jpg|png|pdf)$'
    - '/feed/?$'

  selectors:
    title:
      - h1.post-title.single-post-title.entry-title
      - h1.entry-title
      - h1
    content:
      - .inner-post-entry.entry-content
      - "#penci-post-entry-inner"
      - .entry-content
      - article
    date:
      - time.entry-date.published[datetime]
      - time.entry-date[datetime]
      - time[datetime]
    author:
      - a.author-url
      - .author-italic
    image:
      - .post-image img
      - article img

  date_meta_tags:
    - article:published_time
    - og:article:published_time
    - datePublished

  backfill:
    methods:
      - type: archive
        pages: 40


dinamina-si:
  name: Dinamina
  url: https://www.dinamina.lk
  rss_url: https://www.dinamina.lk/feed/
  language: si

  # Same Soledad/Penci theme as Daily News (Lake House sibling)
  sections:
    latest:
      listing_url: https://www.dinamina.lk/
      archive_pattern: "https://www.dinamina.lk/page/{page}/"
      max_pages: 40

  article_url_patterns:
    - '/\d{4}/\d{2}/\d{2}/[a-z-]+/\d+/'  # /2026/01/27/local/259205/slug

  skip_url_patterns:
    - '/(category|tag|author|page|wp-)/'
    - '/(about|contact|privacy|archives|awards-accolades)/?$'
    - '\.(jpg|png|pdf)$'
    - '/feed/?$'

  selectors:
    title:
      - h1.post-title.single-post-title.entry-title
      - h1.entry-title
      - h1
    content:
      - .inner-post-entry.entry-content
      - "#penci-post-entry-inner"
      - .entry-content
      - article
    date:
      - time.entry-date.published[datetime]
      - time.entry-date[datetime]
      - time[datetime]
    author:
      - a.author-url
      - .author-italic
    image:
      - .post-image img
      - article img

  date_meta_tags:
    - article:published_time
    - og:article:published_time
    - datePublished

  backfill:
    methods:
      - type: archive
        pages: 40


# ─── Tier 3: Lower Priority Sources ─────────────────────────────────────────

deshaya-si:
  name: Deshaya
  url: https://www.deshaya.lk
  rss_url: null
  language: si

  # Custom CMS — section-based listing
  sections:
    features:
      listing_url: https://www.deshaya.lk/43/features
      archive_pattern: null
      max_pages: 1
    harabara:
      listing_url: https://www.deshaya.lk/51/harabara
      archive_pattern: null
      max_pages: 1

  # Two URL formats: /cat/name/nid and /article/cat/name/nid/slug
  article_url_patterns:
    - '/article/\d+/[a-z-]+/\d+/'  # /article/43/features/18785/slug
    - '/\d+/[a-z-]+/\d+'            # /51/harabara/2180

  skip_url_patterns:
    - '/\d+/[a-z-]+/?$'   # section listing pages
    - '\.(jpg|png|pdf)$'

  selectors:
    title:
      - .ins-pos-tit h1
      - h1
    content:
      - .ins-pos-tex
      - article
    date:
      - .sec-1-ite-com
    author:
      - .author-name
    image:
      - .ins-pos-tex img
      - .img-responsive
      - article img

  nid_sweep:
    - url_pattern: "https://www.deshaya.lk/article/43/features/{nid}/x"
      start: 1000
      end: 20000
      max_consecutive_404: 500

  date_meta_tags:
    - article:published_time
    - datePublished

  backfill:
    methods:
      - type: nid_sweep


newsnow-si:
  name: NewsNow
  url: https://www.newsnow.lk
  rss_url: https://www.newsnow.lk/feed/
  language: si

  # WordPress tagDiv Newspaper theme (same as News19)
  sections:
    local:
      listing_url: "https://www.newsnow.lk/archives/category/%e0%b6%b4%e0%b7%94%e0%b7%80%e0%b6%ad%e0%b7%8a/"
      archive_pattern: "https://www.newsnow.lk/archives/category/%e0%b6%b4%e0%b7%94%e0%b7%80%e0%b6%ad%e0%b7%8a/page/{page}/"
      max_pages: 40
    foreign:
      listing_url: "https://www.newsnow.lk/archives/category/%e0%b7%80%e0%b7%92%e0%b6%af%e0%b7%99%e0%b7%83%e0%b7%8a-%e0%b6%b4%e0%b7%94%e0%b7%80%e0%b6%ad%e0%b7%8a/"
      archive_pattern: "https://www.newsnow.lk/archives/category/%e0%b7%80%e0%b7%92%e0%b6%af%e0%b7%99%e0%b7%83%e0%b7%8a-%e0%b6%b4%e0%b7%94%e0%b7%80%e0%b6%ad%e0%b7%8a/page/{page}/"
      max_pages: 40
    features:
      listing_url: "https://www.newsnow.lk/archives/category/%e0%b7%80%e0%b7%92%e0%b7%81%e0%b7%9a%e0%b7%82%e0%b7%8f%e0%b6%82%e0%b6%9c/"
      archive_pattern: "https://www.newsnow.lk/archives/category/%e0%b7%80%e0%b7%92%e0%b7%81%e0%b7%9a%e0%b7%82%e0%b7%8f%e0%b6%82%e0%b6%9c/page/{page}/"
      max_pages: 40

  article_url_patterns:
    - '/archives/\d+'  # /archives/137432

  skip_url_patterns:
    - '/archives/(category|tag|author|page)/'
    - '/archives/tdb_templates/'
    - '/(wp-admin|wp-login|feed)/'
    - '\.(jpg|png|pdf)$'

  # tagDiv selectors (same theme as News19)
  selectors:
    title:
      - h1.entry-title
      - h1.tdb-title-text
      - h1
    content:
      - .td-post-content
      - .tdb_single_content .tdb-block-inner
      - article
    date:
      - time.entry-date[datetime]
      - time[datetime]
    author:
      - .td-post-author-name a
      - a.tdb-author-name
    image:
      - .td-post-featured-image img
      - article img

  nid_sweep:
    - url_pattern: "https://www.newsnow.lk/?p={nid}"
      start: 100000
      end: 140000
      max_consecutive_404: 500

  date_meta_tags:
    - article:published_time
    - og:article:published_time
    - datePublished

  backfill:
    methods:
      - type: archive
        pages: 40
      - type: nid_sweep


lakresa-si:
  name: Lakresa
  url: https://lakresa.net
  rss_url: https://lakresa.net/feed/
  language: si

  # WordPress block theme — date-based URLs
  sections:
    latest:
      listing_url: https://lakresa.net/
      archive_pattern: "https://lakresa.net/page/{page}/"
      max_pages: 40

  article_url_patterns:
    - '/\d{4}/\d{2}/[a-z%]'  # /2025/09/slug (URL-encoded Sinhala)

  skip_url_patterns:
    - '/(category|tag|author|page|wp-)/'
    - '/home/?$'
    - '\.(jpg|png|pdf)$'
    - '/feed/?$'

  selectors:
    title:
      - h1.wp-block-post-title
      - h1
    content:
      - .entry-content.post-content.wp-block-post-content
      - .wp-block-post-content
      - .entry-content
      - article
    date:
      - .wp-block-post-date time[datetime]
      - time[datetime]
    author:
      - .wp-block-post-author__name
    image:
      - article img

  nid_sweep:
    - url_pattern: "https://lakresa.net/?p={nid}"
      start: 20000
      end: 30000
      max_consecutive_404: 500

  date_meta_tags:
    - article:published_time
    - og:article:published_time
    - datePublished

  backfill:
    methods:
      - type: archive
        pages: 40
      - type: nid_sweep


news-lk-en:
  name: News.lk
  url: https://www.news.lk
  rss_url: null  # Joomla CMS — no standard RSS
  language: en

  # Joomla with SP Page Builder — ?start=N offset pagination
  sections:
    current-affairs:
      listing_url: https://www.news.lk/current-affairs
      archive_pattern: "https://www.news.lk/current-affairs?start={page}"
      page_start: 0
      page_step: 13
      max_pages: 40
    news:
      listing_url: https://www.news.lk/news
      archive_pattern: "https://www.news.lk/news?start={page}"
      page_start: 0
      page_step: 13
      max_pages: 40

  article_url_patterns:
    - '/current-affairs/[a-z]'
    - '/news/[a-z]'
    - '/parliament/[a-z]'
    - '/press-release/[a-z]'
    - '/cabinet-decisions/[a-z]'

  skip_url_patterns:
    - '/contact/?$'
    - '/help-faq/?$'
    - '/(categories|media-accreditation)/'
    - '\?start=\d+'  # listing pages themselves
    - '/(economy-development|district-news|art-cultural|sports-news)/?$'
    - '\.(jpg|png|pdf)$'

  selectors:
    title:
      - .page-header h1
      - h1
    content:
      - .com-content-article__body
      - .item-page
      - article
    date:
      - "time[itemprop='dateCreated']"
      - time[datetime]
      - .create
    author:
      - .author-name
    image:
      - .article-full-image img
      - article img

  date_meta_tags:
    - article:published_time
    - datePublished

  backfill:
    methods:
      - type: archive
        pages: 40


ada-si:
  name: Ada.lk
  url: https://www.ada.lk
  rss_url: null
  language: si

  # Wijeya Newspapers custom CMS (same family as Lankadeepa)
  sections:
    breaking-news:
      listing_url: https://www.ada.lk/breaking-news/110
      archive_pattern: null
      max_pages: 1
    international:
      listing_url: https://www.ada.lk/international/3
      archive_pattern: null
      max_pages: 1
    entertainment:
      listing_url: https://www.ada.lk/entertainment/8
      archive_pattern: null
      max_pages: 1

  # URL pattern: /section/slug/cat_id-article_id
  article_url_patterns:
    - '/[a-z_-]+/.+/\d+-\d+'  # /breaking_news/slug/11-417009

  skip_url_patterns:
    - '/(video|health|cartoon|infographics|feedback)/'
    - '/(breaking-news|international|entertainment|provincial_news)/\d+/?$'
    - '/ada_7/'
    - '\.(jpg|png|pdf)$'

  selectors:
    title:
      - h1.single-head
      - h1
    content:
      - .single-body-wrap
      - article
    date:
      - .sr-date
    author:
      - .author-name
    image:
      - .single-body-wrap img
      - article img

  nid_sweep:
    - url_pattern: "https://www.ada.lk/breaking_news/x/11-{nid}"
      start: 300000
      end: 420000
      max_consecutive_404: 500

  date_meta_tags:
    - article:published_time
    - datePublished

  backfill:
    methods:
      - type: nid_sweep
